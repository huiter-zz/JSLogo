<!DOCTYPE html>
<html lang="zh-CN">
	<head>
		<meta charset="utf-8">
			<title>Logo,By huiter</title>
			<meta name="viewport" content="width=device-width, initial-scale=1.0">
			<meta name="description" content="Logo语言HTML5实现版">
			<meta name="author" content="huiter，90后技术宅。">
			<!-- Le styles -->
			<link href="http://storage.aliyun.com/pixels/assets/css/bootstrap.css" rel="stylesheet">
			<style type="text/css">
			body {
			padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
			}
			</style>
							
			<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
			<!--[if lt IE 9]>
			<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
			<![endif]-->
			<!-- Le fav and touch icons -->         
			<link rel="shortcut icon" href="http://storage.aliyun.com/pixels/assets/ico/favicon.ico">
	</head>

	<body>
	<div class="container">
		
	<header style="text-align:center;">
		<div class="row">
			<div class="thumbnail span6 offset3"><span class="label label-important">Logo语言HTML5版</span></div>
		</div>
	</header>
	<hr>
		<!-- 在这之下写东西。-->
	<div class="row">
		<canvas id="logo" width=640 height=400 style="border:1px solid #BBBBBB;margin:0 auto;display:block;">
	</div>


		<div  class="well" style="position:fixed;bottom:100px;width:920px;height:40px;">
			<form class="form-inline" id="command">
				<input type="text" placeholder="" id="input" autocomplete="off" style="width:910px;">
			</form>
			<p id="message"></p>
		</div>
	</div> 
	<!-- /container -->
	<!--[if IE 6]>
	<script src="http://letskillie6.googlecode.com/svn/trunk/letskillie6.zh_CN.pack.js"></script>
	<![endif]-->
		<script src="http://storage.aliyun.com/pixels/assets/js/jquery-1.7.2.min.js"></script>
		<script src="http://storage.aliyun.com/pixels/assets/js/bootstrap.min.js"></script> 
		<script src="http://storage.aliyun.com/pixels/assets/js/application.js"></script>  
		<script type="text/javascript">
			var Logo = (function() {
				var API ={}; 
				var canvas;
				var context;
				var color = "#000000";
				var angle = 0;
				var site ={};
				var pen;
				//初始化
				API.initialize = function(){
					canvas = document.getElementById('logo');
					context = canvas.getContext('2d');

					var image = new Image();
					image.src = "arrow.png";
					image.width = 16;
					image.height = 16;
					site.x=320;
					site.y=200;
					image.onload = function () {
						//context.drawImage(image,320,200,8,8);
					}
					context.lineWidth = 2;
					pen = "open";
				};
				//前进X个单位
				API.FD = function(length){
					context.beginPath();
					context.moveTo(site.x,site.y); 
					var x = site.x - length*Math.sin(angle*Math.PI/180);
					var y = site.y - length*Math.cos(angle*Math.PI/180);
					context.lineTo(x,y);
					if(pen == 'open')   
						context.stroke(); 
					context.closePath();
					setsite(x,y); 
					console.log('angle'+angle);
				}
				//后退X个单位
				API.BK = function(length){
					context.beginPath();
					context.moveTo(site.x,site.y); 
					var x = site.x + length*Math.sin(angle*Math.PI/180);
					var y = site.y + length*Math.cos(angle*Math.PI/180);
					context.lineTo(x,y);
					if(pen == 'open')
						context.stroke();
					context.closePath(); 
					setsite(x,y); 
				}
				//左转X度
				API.LT = function(x){
					angle += parseFloat(x);
				}
				//右转X度
				API.RT = function(x){
					angle -= parseFloat(x);
					angle = angle%360;
				}
				API.PD = function(x){
					pen = 'open';
				}
				API.PU = function(x){
					pen = 'off';
				}
				function setsite(x,y){
					site.x = x;
					site.y = y;
				}

				return API;
			})();
			Logo.initialize();

		</script>
		<script type="text/javascript">
			$('#input').focus();

			$('#command').submit(function(event){
				event.preventDefault();
				var command = $('#input').attr('value').toUpperCase().replace(/[^A-Z0-9\+\-\*\/\[\]\:\>\<\=\.\s]+/g,'').replace(/(^\s+)|(\s+$)/g,'').split(/\s+/);
				$('#input').attr('value','');
				console.log(command);

			function process(){
				switch (command[0])
				{
					case 'FD':
								{
									Logo.FD(command[1]);
								}
								break
					case 'BK':
								{
									Logo.BK(command[1]);
								}
								break
					case 'PD':
								{
									Logo.PD();
								}
								break
					case 'PU':
								{
									Logo.PU();
								}
								break
					case 'LT':
								{
									Logo.LT(command[1]);
								}
								break
					case 'RT':
								{
									Logo.RT(command[1]);
								}
								break

					default:
								alert("命令有误");
			　　}
				
			});

			}
		</script>
	</body>
</html>
